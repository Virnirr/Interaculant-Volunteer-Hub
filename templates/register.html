{% extends "layout.html" %}

{% block title %}
    Register
{% endblock %}

{% block main %}
    <div class="container-fluid">
        <div class="container p-5">
            <div class="account p-3">
                <div class="text-center">
                    <h4 class="mt-3 text-dark">Create an Account!</h4>
                </div>
                <form action="/register" method="post" onsubmit= "return validate();">
                    <div class= "form-group mb-3 mt-4">
                        <input id="username" class="form-control" autocomplete="off" name="username" placeholder="Username" type="text" required>
                    </div>
                    <div class="error" id="username_confirmation">
                        Username Missing
                    </div>
                    <div class= "form-group mb-3 mt-4">
                        <input id="email" class="form-control" autocomplete="off" name="email" placeholder="Email Address" type="email" required>
                    </div>
                    <div class="error" id="email_confirmation">
                        Email Missing
                    </div>
                    <div class= "form-group mb-3 mt-4">
                        <input id="password" class="form-control" autocomplete="off" name="password" placeholder="Password" type="password" required>
                    </div>
                    <div class="error" id="password_confirmation">
                        Password Missing
                    </div>
                    <div class= "form-group mb-3 mt-4">
                        <input id="confirmation" class="form-control" autocomplete="off" name="confirmation" placeholder="Repeat Passowrd" type="password" required>
                    </div>
                    <div class="error" id="error_confirmation">
                        Password does not match
                    </div>
                    <div class= "form-group">
                        <button type="submit" class="mb-3 mt-4 btn btn-primary btn-lg btn-block"><span style="font-size: 1rem;">Register Account</span></button>
                    </div>
                </form>
                <hr>
                <div class="text-center" style="margin-bottom: 30px;">
                    <a class="medium" href="/login">Already have an account?</a>
                </div>
            </div>
        </div>
    </div>
    <script>
        const username_error = document.getElementById('username');
        const email_error = document.getElementById('email');
        const password_error = document.getElementById('password');
        const confirmation_error = document.getElementById('confirmation');

        const error1 = document.getElementById('username_confirmation');
        const error2 = document.getElementById('email_confirmation');
        const error3 = document.getElementById('password_confirmation');
        const error4 = document.getElementById('error_confirmation');
        
        function validate()
        {
            if(username_error.value != "")
            {
                error1.style.display="none";
            }
            if(email_error.value != "")
            {
                error2.style.display="none";
            }
            if(password_error.value != "")
            {
                error3.style.display="none";
            }
            if(username_error.value == "" || username_error.value == null)
            {
                error1.style.display="block";
                return false;
            }
            if(email_error.value == "" || email_error.value == null)
            {
                error2.style.display="block";
                return false;
            }
            if (password_error.value == "" || password_error.value == null)
            {
                error3.style.display="block";
                return false;
            }
            if(password_error.value != confirmation_error.value)
            {
                error4.style.display="block";
                return false;
            }
            else
            {
                return true;
            }
        }
    </script>
{% endblock %}
